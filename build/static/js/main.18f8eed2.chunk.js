(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(16),o=t.n(c),u=(t(7),t(6)),a=t(3),r=t(2),i=t(4),l=t.n(i),s="/api/persons",b={getAll:function(){return l.a.get(s).then((function(e){return e.data}))},addNew:function(e){return l.a.post(s,e).then((function(e){return e.data}))},removeName:function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},changeNumber:function(e){return l.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))}},d=t(0),j=function(e){return Object(d.jsxs)("div",{children:["filter: ",Object(d.jsx)("input",{value:e.value,onChange:e.onChange})]})},f=function(e){return Object(d.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:e.nameInputValue,onChange:e.nameOnChange})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:e.numberInputValue,onChange:e.numberOnChange})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:[e.name," ",e.number,Object(d.jsx)("button",{onClick:e.onClick,children:" delete "})]},e.id)})},h=function(e){var n=e.message;return null===n?null:Object(d.jsx)("div",{className:"notification",children:n})},O=function(e){var n=e.errorMessage;return null===n?null:Object(d.jsx)("div",{className:"errorNotification",children:n})},v=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),i=Object(a.a)(o,2),l=i[0],s=i[1],v=Object(r.useState)(""),p=Object(a.a)(v,2),g=p[0],x=p[1],C=Object(r.useState)([]),k=Object(a.a)(C,2),w=k[0],N=k[1],S=Object(r.useState)(""),I=Object(a.a)(S,2),y=I[0],T=I[1],A=Object(r.useState)(null),V=Object(a.a)(A,2),D=V[0],E=V[1],J=Object(r.useState)(null),M=Object(a.a)(J,2),U=M[0],B=M[1];Object(r.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);var P=[];return P=0===w.length&&0===y.length?t:0===w.length&&y.length>0?[]:w,Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),null!==U?Object(d.jsx)(O,{errorMessage:U}):Object(d.jsx)(h,{message:D}),Object(d.jsx)(j,{value:y,onChange:function(e){var n=e.target.value.toUpperCase();N(t.filter((function(e){return e.name.toUpperCase().includes(n)}))),T(e.target.value)}}),Object(d.jsx)("h2",{children:"Add new"}),Object(d.jsx)(f,{onSubmit:function(e){e.preventDefault();if(!0===t.some((function(e){return e.name===l}))){if(window.confirm("".concat(l," has already been added to phonebook, replace old number with new one"))){var n=t.find((function(e){return e.name===l})),o=Object(u.a)(Object(u.a)({},n),{},{number:g});b.changeNumber(o).then((function(e){P=t.map((function(n){return n.id!==o.id?n:e})),c(P)})).catch((function(e){B("Information of ".concat(l," has already been removed from phonebook")),setTimeout((function(){B(null)}),2e3),c(t.filter((function(e){return e.id!==o.id})))})),E("Number of ".concat(l," has been changed")),setTimeout((function(){E(null)}),2e3)}}else{var a={name:l,number:g};b.addNew(a).then((function(e){c(t.concat(e)),N(t.concat(e)),s(""),x(""),E("Added ".concat(a.name," to phonebook")),setTimeout((function(){E(null)}),2e3)}))}s(""),x("")},nameInputValue:l,nameOnChange:function(e){s(e.target.value)},numberInputValue:g,numberOnChange:function(e){x(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)("div",{children:P.map((function(e){return Object(d.jsx)(m,{name:e.name,number:e.number,onClick:function(){return n=e.id,o=e.name,void(window.confirm("Delete ".concat(o))&&(b.removeName(n).then((function(){c(t.filter((function(e){return e.id!==n}))),N("")})).catch((function(e){B("Information of ".concat(o," has already been removed from phonebook")),setTimeout((function(){B(null)}),2e3),c(t.filter((function(e){return e.id!==n}))),console.log(t)})),E("Removed ".concat(o," from phonebook")),console.log("removed "),setTimeout((function(){E(null)}),2e3)));var n,o}},e.id)}))})]})};o.a.render(Object(d.jsx)(v,{}),document.getElementById("root"))},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.18f8eed2.chunk.js.map