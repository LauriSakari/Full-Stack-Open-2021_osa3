(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(16),u=t.n(c),a=(t(7),t(6)),o=t(3),r=t(2),i=t(4),l=t.n(i),s="/api/persons",b={getAll:function(){return l.a.get(s).then((function(e){return e.data}))},addNew:function(e){return l.a.post(s,e).then((function(e){return e.data}))},removeName:function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},changeNumber:function(e){return console.log("terveiset personsista ",e),l.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))}},d=t(0),j=function(e){return Object(d.jsxs)("div",{children:["filter: ",Object(d.jsx)("input",{value:e.value,onChange:e.onChange})]})},h=function(e){return Object(d.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:e.nameInputValue,onChange:e.nameOnChange})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:e.numberInputValue,onChange:e.numberOnChange})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:[e.name," ",e.number,Object(d.jsx)("button",{onClick:e.onClick,children:" delete "})]},e.id)})},f=function(e){var n=e.message;return console.log(n),null===n?null:Object(d.jsx)("div",{className:"notification",children:n})},O=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)(""),i=Object(o.a)(u,2),l=i[0],s=i[1],O=Object(r.useState)(""),p=Object(o.a)(O,2),v=p[0],g=p[1],x=Object(r.useState)([]),C=Object(o.a)(x,2),w=C[0],k=C[1],S=Object(r.useState)(""),N=Object(o.a)(S,2),I=N[0],A=N[1],V=Object(r.useState)(null),y=Object(o.a)(V,2),T=y[0],D=y[1];Object(r.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);var E=[];return E=0===w.length&&0===I.length?t:0===w.length&&I.length>0?[]:w,Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(f,{message:T}),Object(d.jsx)(j,{value:I,onChange:function(e){console.log("handlefilter",t),console.log(t[0].name);var n=e.target.value.toUpperCase();k(t.filter((function(e){return e.name.toUpperCase().includes(n)}))),A(e.target.value)}}),Object(d.jsx)("h2",{children:"Add new"}),Object(d.jsx)(h,{onSubmit:function(e){e.preventDefault();if(!0===t.some((function(e){return e.name===l}))){if(window.confirm("".concat(l," has already been added to phonebook, replace old number with new one"))){var n=t.find((function(e){return e.name===l})),u=Object(a.a)(Object(a.a)({},n),{},{number:v});b.changeNumber(u).then((function(e){E=t.map((function(n){return n.id!==u.id?n:e})),c(E)})),D("".concat(l," has been given a new number")),setTimeout((function(){D(null)}),2e3)}}else{var o={name:l,number:v};b.addNew(o).then((function(e){c(t.concat(e)),k(t.concat(e)),s(""),g(""),D("Added ".concat(o.name," to phonebook")),setTimeout((function(){D(null)}),2e3)}))}s(""),g("")},nameInputValue:l,nameOnChange:function(e){s(e.target.value)},numberInputValue:v,numberOnChange:function(e){g(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)("div",{children:E.map((function(e){return Object(d.jsx)(m,{name:e.name,number:e.number,onClick:function(){return n=e.id,u=e.name,void(window.confirm("Delete ".concat(u))&&(b.removeName(n).then((function(){c(t.filter((function(e){return e.id!==n}))),k("")})),D("Removed ".concat(u," from phonebook")),setTimeout((function(){D(null)}),2e3)));var n,u}},e.id)}))})]})};u.a.render(Object(d.jsx)(O,{}),document.getElementById("root"))},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.783e1790.chunk.js.map